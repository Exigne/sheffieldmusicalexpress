[build]
  command = "npm run build"
  publish = ".next"

[build.environment]
  NODE_VERSION = "20"
  # This tells the Netlify Next.js plugin to handle the App Router properly
  NEXT_USE_NETLIFY_EDGE = "true" 

[[redirects]]
  from = "/api/*"
  to = "/.netlify/functions/:splat"
  status = 200

# DO NOT add the /* to /index.html redirect here. 
# Next.js handles its own routing.
