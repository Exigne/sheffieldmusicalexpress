{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 14, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/sheffieldmusicalexpress/lib/db.ts"],"sourcesContent":["import { neon } from '@neondatabase/serverless';\n\nif (!process.env.DATABASE_URL) {\n  throw new Error('DATABASE_URL environment variable is not set');\n}\n\nexport const sql = neon(process.env.DATABASE_URL);\n"],"names":[],"mappings":";;;;AAAA;;AAEA,IAAI,CAAC,QAAQ,GAAG,CAAC,YAAY,EAAE;IAC7B,MAAM,IAAI,MAAM;AAClB;AAEO,MAAM,MAAM,IAAA,8JAAI,EAAC,QAAQ,GAAG,CAAC,YAAY"}},
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/sheffieldmusicalexpress/app/page.tsx"],"sourcesContent":["import { sql } from '@/lib/db';\n\ntype Board = {\n  id: number;\n  slug: string;\n  name: string;\n  description: string;\n  icon: string;\n  post_count: number;\n  thread_count: number;\n};\n\ntype Thread = {\n  id: number;\n  title: string;\n  reply_count: number;\n  created_at: string;\n  board_name: string;\n  board_slug: string;\n  username: string;\n};\n\nasync function getBoards(): Promise<Board[]> {\n  return await sql`SELECT * FROM boards ORDER BY id`;\n}\n\nasync function getRecentThreads(): Promise<Thread[]> {\n  return await sql`\n    SELECT\n      t.id,\n      t.title,\n      t.reply_count,\n      t.created_at,\n      b.name AS board_name,\n      b.slug AS board_slug,\n      u.username\n    FROM threads t\n    LEFT JOIN boards b ON t.board_id = b.id\n    LEFT JOIN users u ON t.user_id = u.id\n    ORDER BY t.last_reply_at DESC\n    LIMIT 10\n  `;\n}\n\nfunction timeAgo(dateStr: string): string {\n  const diff = Date.now() - new Date(dateStr).getTime();\n  const mins = Math.floor(diff / 60000);\n  if (mins < 60) return `${mins}m ago`;\n  const hrs = Math.floor(mins / 60);\n  if (hrs < 24) return `${hrs}h ago`;\n  return `${Math.floor(hrs / 24)}d ago`;\n}\n\nconst boardColors: Record<string, string> = {\n  gear: 'rust',\n  'band-wanted': 'gold',\n  gigs: 'ink',\n  production: 'steel',\n  technique: 'ink',\n  records: 'gold',\n};\n\nexport default async function HomePage() {\n  const [boards, threads] = await Promise.all([getBoards(), getRecentThreads()]);\n\n  return (\n    <div className=\"page-wrapper\">\n      <div className=\"content-area\">\n\n        {/* BOARDS */}\n        <div className=\"section-label\">Forum Boards</div>\n        <div className=\"boards-grid\">\n          {boards.map((board) => (\n            <a\n              key={board.id}\n              href={`/boards/${board.slug}`}\n              className={`board-card ${boardColors[board.slug] || 'ink'}`}\n            >\n              <span className=\"board-icon\">{board.icon}</span>\n              <div className=\"board-name\">{board.name}</div>\n              <div className=\"board-desc\">{board.description}</div>\n              <div className=\"board-meta\">\n                <span><strong>{board.post_count.toLocaleString()}</strong> posts</span>\n                <span><strong>{board.thread_count.toLocaleString()}</strong> threads</span>\n              </div>\n            </a>\n          ))}\n        </div>\n\n        {/* RECENT THREADS */}\n        <div className=\"section-label\">Latest Threads</div>\n        {threads.length === 0 ? (\n          <div className=\"no-threads\">\n            No threads yet — <a href=\"/new-thread\">be the first to post!</a>\n          </div>\n        ) : (\n          <ul className=\"thread-list\">\n            {threads.map((thread) => (\n              <li key={thread.id} className=\"thread-item\">\n                <div className=\"thread-avatar\">\n                  {thread.username ? thread.username.slice(0, 2).toUpperCase() : '??'}\n                </div>\n                <div className=\"thread-info\">\n                  <a href={`/threads/${thread.id}`} className=\"thread-title\">\n                    {thread.title}\n                  </a>\n                  <div className=\"thread-sub\">\n                    <span className=\"board-tag\">{thread.board_name}</span>\n                    by <strong>{thread.username || 'Unknown'}</strong> · {timeAgo(thread.created_at)}\n                  </div>\n                </div>\n                <div className=\"thread-replies\">\n                  <strong>{thread.reply_count}</strong> replies\n                </div>\n              </li>\n            ))}\n          </ul>\n        )}\n\n      </div>\n\n      {/* SIDEBAR */}\n      <aside className=\"sidebar\">\n        <a href=\"/new-thread\" className=\"btn-post\">+ Start a New Thread</a>\n\n        <div className=\"sidebar-widget\">\n          <div className=\"widget-header\">Forum Stats</div>\n          <div className=\"widget-body\">\n            <div className=\"stats-grid\">\n              <div className=\"stat-box\">\n                <span className=\"stat-number\">\n                  {boards.reduce((sum, b) => sum + b.post_count, 0).toLocaleString()}\n                </span>\n                <span className=\"stat-label\">Posts</span>\n              </div>\n              <div className=\"stat-box\">\n                <span className=\"stat-number\">\n                  {boards.reduce((sum, b) => sum + b.thread_count, 0).toLocaleString()}\n                </span>\n                <span className=\"stat-label\">Threads</span>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"sidebar-widget\">\n          <div className=\"widget-header\">Join the Community</div>\n          <div className=\"widget-body\" style={{ textAlign: 'center' }}>\n            <p style={{ fontSize: '0.82rem', color: '#666', marginBottom: '14px', lineHeight: '1.5' }}>\n              Free membership. Connect with Sheffield musicians, post gigs, swap gear, and find your band.\n            </p>\n            <a href=\"/register\" className=\"btn-register\">Register Free →</a>\n          </div>\n        </div>\n      </aside>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}